{"version":3,"file":"main.js","sources":["source/js/formulas.js","source/js/components/calculation.js","source/js/main.js"],"sourcesContent":["export const renderComponent = (container, element, place) => {\r\n  switch (place) {\r\n    case `afterBegin`:\r\n      container.prepend(element.getElement());\r\n      break;\r\n    case `afterEnd`:\r\n      container.after(element.getElement());\r\n      break;\r\n    default:\r\n      container.append(element.getElement());\r\n  }\r\n};\r\n\r\nexport const createElement = (template) => {\r\n  const newElement = document.createElement(`div`);\r\n  newElement.innerHTML = template;\r\n  return newElement.firstChild;\r\n};\r\n","import {createElement} from \"../formulas.js\";\r\n\r\nconst START_COST_OF_PROPERTY = 2000000;\r\n\r\nconst createCalculationTemplate = (options = {}) => {\r\n  const {costOfProperty} = options;\r\n  return (\r\n    `<div class=\"page-calculation\">\r\n      <div class=\"container clearfix\">\r\n        <h2>Кредитный калькулятор</h2>\r\n\r\n        <div class=\"page-calculation__first-step\">\r\n          <h3>Шаг 1. Цель кредита</h3>\r\n          <select id=\"type-of-credit\" name=\"credit-type\">\r\n            <option value=\"novalue\" selected>Выберете цель кредита</option>\r\n            <option value=\"mortgage\">Ипотечное кредитование</option>\r\n            <option value=\"automobile\">Автомобильное кредитование</option>\r\n            <option value=\"consumer\">Потребительский кредит</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div class=\"page-calculation__our-offer\">\r\n          <h3>Наше предложение</h3>\r\n          <div class=\"calculation__result\">\r\n            <div><p>1 300 000 рублей</br>Сумма ипотеки</p></div>\r\n            <div><p>9,40%</br>Процентная ставка</p></div>\r\n            <div><p>27 000 рублей</br>Ежемесячный платеж</p></div>\r\n            <div><p>60 000 рублей</br>Необходимый доход</p></div>\r\n          </div>\r\n        </div>\r\n\r\n        <form class=\"page-calculation__parameters\">\r\n          <h3>Шаг 2. Введите параметры кредита</h3>\r\n\r\n          <fieldset>\r\n            <label for=\"cost-of-property\">Стоимость недвижимости</label>\r\n            <input \r\n              id=\"cost-of-property\"\r\n              type=\"number\"\r\n              value=\"${costOfProperty}\"\r\n              step=\"100000\"\r\n              min=\"1200000\"\r\n              max=\"25000000\"\r\n              required\r\n            />\r\n            <p>От 1 200 000 до 25 000 000 рублей</p>\r\n          </fieldset>\r\n\r\n          <fieldset>\r\n            <label for=\"first-payment\">Первоначальный взнос</label>\r\n            <input \r\n              id=\"first-payment\"\r\n              type=\"number\"\r\n              value=\"2000000\"\r\n              step=\"100000\"\r\n              min=\"1200000\"\r\n              max=\"25000000\"\r\n              required\r\n            />\r\n          </fieldset>\r\n\r\n            <p>Срок кредитования</p>\r\n            <select id=\"fwhteadf\" name=\"sdfewfwe\">\r\n              <option value=\"novalue\" selected>Выберете цель кредита</option>\r\n              <option value=\"mortgage\">Ипотечное кредитование</option>\r\n              <option value=\"automobile\">Автомобильное кредитование</option>\r\n              <option value=\"consumer\">Потребительский кредит</option>\r\n            </select>\r\n          </fieldset>\r\n        </form>\r\n      </div>\r\n    </div>`\r\n  );\r\n};\r\n\r\nexport default class Calculation {\r\n  constructor() {\r\n    this._element = null;\r\n    this._subscribeOnEvents();\r\n    this._costOfProperty = START_COST_OF_PROPERTY;\r\n  }\r\n\r\n  getTemplate() {\r\n    return createCalculationTemplate({\r\n      costOfProperty: this._costOfProperty\r\n    });\r\n  }\r\n\r\n  getElement() {\r\n    if (!this._element) {\r\n      this._element = createElement(this.getTemplate());\r\n    }\r\n    return this._element;\r\n  }\r\n\r\n  removeElement() {\r\n    this._element = null;\r\n  }\r\n\r\n  recoveryListeners() {\r\n    this._subscribeOnEvents();\r\n  }\r\n\r\n  reRender() {\r\n    const oldElement = this.getElement();\r\n    const parent = oldElement.parentElement;\r\n    this.removeElement();\r\n    const newElement = this.getElement();\r\n    parent.replaceChild(newElement, oldElement);\r\n    this.recoveryListeners();\r\n  }\r\n\r\n  reset() {\r\n    this._costOfProperty = START_COST_OF_PROPERTY;\r\n    this.reRender();\r\n  }\r\n\r\n  _subscribeOnEvents() {\r\n    const element = this.getElement();\r\n\r\n    element.querySelector(`#cost-of-property`)\r\n        .addEventListener(`change`, (evt) => {\r\n          if (evt.target.value <= 25000000 && evt.target.value >= 1200000) {\r\n            this._costOfProperty = evt.target.value;\r\n          }\r\n        });\r\n\r\n    element.querySelector(`form`)\r\n        .addEventListener(`submit`, (evt) => {\r\n          evt.preventDefault();\r\n        });\r\n  }\r\n}\r\n","import CalculationComponent from \"./components/calculation.js\";\nimport {renderComponent} from \"./formulas.js\";\n\nconst pageOffersMenu = document.querySelector(`.page-offers-menu`);\nconst calculationComponent = new CalculationComponent();\nrenderComponent(pageOffersMenu, calculationComponent, `afterEnd`);\n\n"],"names":["CalculationComponent"],"mappings":"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"}